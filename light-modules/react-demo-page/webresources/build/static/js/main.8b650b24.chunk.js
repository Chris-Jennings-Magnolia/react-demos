(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,a){e.exports=a(53)},48:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(22),i=a.n(o),s=a(3),l=a(5),u=a(6),c=a(9),p=a(7),d=a(8),h=a(57),m=a(56),T=a(55),y=a(11),g=a.n(y),v=(a(48),function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"createMarkup",value:function(e){return{__html:e}}},{key:"render",value:function(){var e,t=this,a=(e=this.props.tourName,t.props.tours.find(function(t){return t["@name"]===e})),n={backgroundImage:"url("+window.MAGNOLIA_BASE_URL_IMAGE+a.image["@link"]+")",backgroundSize:"cover",backgroundPosition:"center"};return r.a.createElement("div",{className:"tour-detail"},r.a.createElement(T.a,{className:"tour-detail-home",to:"/"},"\xab Return to",r.a.createElement("br",null),"\xa0 Tours List"),r.a.createElement("h3",null,a.name),r.a.createElement("p",null,a.description),r.a.createElement("div",{className:"tour-detail-img",style:n}),r.a.createElement("div",{className:"tour-detail-body",dangerouslySetInnerHTML:this.createMarkup(a.body)}))}}]),t}(n.Component)),E=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).handleFilterTextInputChange=a.handleFilterTextInputChange.bind(Object(s.a)(a)),a.handleDestinationChange=a.handleDestinationChange.bind(Object(s.a)(a)),a.handleTourTypeChange=a.handleTourTypeChange.bind(Object(s.a)(a)),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"handleFilterTextInputChange",value:function(e){this.props.onFilterTextInput(e.target.value)}},{key:"handleDestinationChange",value:function(e){console.log("FilterBar:handleDestinationChange"),this.props.onDestinationChange(e.target.value)}},{key:"handleTourTypeChange",value:function(e){this.props.onTourTypeChange(e.target.value)}},{key:"render",value:function(){return r.a.createElement("form",null,r.a.createElement("div",{className:"bar-control"},r.a.createElement("label",null,"Destination"),r.a.createElement("select",{value:this.props.destination,onChange:this.handleDestinationChange,id:"destination"},r.a.createElement("option",{value:"",key:"all"},"Anywhere"),this.props.destinations.map(function(e){return r.a.createElement("option",{value:e["@id"],key:e.displayName},e.displayName)}))),r.a.createElement("div",{className:"bar-control"},r.a.createElement("label",null,"Tour Type"),r.a.createElement("select",{value:this.props.tourType,onChange:this.handleTourTypeChange,id:"TourType"},r.a.createElement("option",{value:"",key:"all"},"Anything"),this.props.tourTypes.map(function(e){return r.a.createElement("option",{value:e["@id"],key:e.displayName},e.displayName)}))),r.a.createElement("div",{className:"bar-control"},r.a.createElement("label",null,"Search"),r.a.createElement("input",{type:"text",value:this.props.filterText,onChange:this.handleFilterTextInputChange,id:"search"})))}}]),t}(n.Component),b=window.MAGNOLIA_BASE_URL,O=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"About"),r.a.createElement("p",null,"A React app connected to a Magnolia server."))},f=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).serverRequest={},a.state={tours:[],tourTypes:[],destinations:[],loaded:!1},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(window.MAGNOLIA_TOURS&&window.MAGNOLIA_DESTINATIONS&&window.MAGNOLIA_TOURTYPES)console.log("Has inline data."),e.setState({tours:window.MAGNOLIA_TOURS.results,destinations:window.MAGNOLIA_DESTINATIONS.results,tourTypes:window.MAGNOLIA_TOURTYPES.results,loaded:!0});else{console.log("Must retrieve data.");var t={auth:{username:"superuser",password:"superuser"}};this.serverRequest=g.a.all([g.a.get(b+"/.rest/delivery/demoTours/v1/",t),g.a.get(b+"/.rest/delivery/demoTourTypes/v1/",t),g.a.get(b+"/.rest/delivery/demoDestinations/v1/",t)]).then(g.a.spread(function(t,a,n){e.setState({tours:t.data.results,tourTypes:a.data.results,destinations:n.data.results,loaded:!0}),console.log("App:serverRequest: Got all files.")}))}}},{key:"componentWillUnmount",value:function(){this.serverRequest}},{key:"render",value:function(){var e=this,t=window.PUBLIC_URL+"/logo.svg",a=window.PUBLIC_URL+"/logo-magnolia.svg";return!1===this.state.loaded?r.a.createElement("div",null,"NOT LOADED."):r.a.createElement(h.a,null,r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"App-header"},r.a.createElement("div",{className:"App-logos"},r.a.createElement("img",{src:t,className:"App-logo",alt:"React Logo"}),r.a.createElement("img",{src:a,className:"App-logo",alt:"Magnolia Logo"})),r.a.createElement("h3",null,window.MAGNOLIA_HEADER),r.a.createElement("p",null,window.MAGNOLIA_HEADER_ABSTRACT)),r.a.createElement(m.a,{exact:!0,path:"/",render:function(){return r.a.createElement(A,{tours:e.state.tours,destinations:e.state.destinations,tourTypes:e.state.tourTypes})}}),r.a.createElement(m.a,{path:"/about",component:O}),r.a.createElement(m.a,{path:"/tourDetail/:tourName",render:function(t){var a=t.match;return r.a.createElement(v,{tours:e.state.tours,tourName:a.params.tourName})}})))}}]),t}(n.Component),A=function(e){function t(e){var a;return Object(l.a)(this,t),console.log("Construct FilterableTourList"),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={filterText:"",destination:"",tourType:""},a.handleFilterTextInput=a.handleFilterTextInput.bind(Object(s.a)(a)),a.handleDestinationChange=a.handleDestinationChange.bind(Object(s.a)(a)),a.handleTourTypeChange=a.handleTourTypeChange.bind(Object(s.a)(a)),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"handleFilterTextInput",value:function(e){this.setState({filterText:e})}},{key:"handleDestinationChange",value:function(e){console.log("App:Dest="+e),this.setState({destination:e})}},{key:"handleTourTypeChange",value:function(e){this.setState({tourType:e})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Find Your Tour"),r.a.createElement(E,{destinations:this.props.destinations,tourTypes:this.props.tourTypes,filterText:this.state.filterText,destination:this.state.destination,tourType:this.state.tourType,onFilterTextInput:this.handleFilterTextInput,onDestinationChange:this.handleDestinationChange,onTourTypeChange:this.handleTourTypeChange}),r.a.createElement(C,{tours:this.props.tours,tourTypes:this.props.tourTypes,filterText:this.state.filterText,destination:this.state.destination,tourType:this.state.tourType}))}}]),t}(n.Component),C=function(e){function t(e){var a;return Object(l.a)(this,t),console.log("Construct TourList"),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).isFilterMatch=a.isFilterMatch.bind(Object(s.a)(a)),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"isFilterMatch",value:function(e){var t=this,a=-1!==e.name.toLowerCase().indexOf(this.props.filterText.toLowerCase()),n=e.destination.some(function(e){return e["@id"]===t.props.destination})||""===this.props.destination,r=e.tourTypes.some(function(e){return e["@id"]===t.props.tourType})||""===this.props.tourType;return a&&n&&r}},{key:"render",value:function(){var e=this,t=this.props.tours.filter(this.isFilterMatch);return r.a.createElement("div",null,r.a.createElement("div",{className:"tour-count"},t.length," matching tours."),t.map(function(t){return r.a.createElement(N,{key:t.name,tour:t,tourTypes:e.props.tourTypes})}))}}]),t}(n.Component),N=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e={backgroundImage:"url("+window.MAGNOLIA_BASE_URL_IMAGE+this.props.tour.image.renditions["320x240"].link+")",backgroundSize:"cover",backgroundPosition:"center"};return r.a.createElement("div",{className:"App-tour"},r.a.createElement(T.a,{to:"tourDetail/"+this.props.tour["@name"]},r.a.createElement("div",{className:"App-tour-img",style:e},r.a.createElement("div",{className:"App-tour-text"},this.props.tour.name))))}}]),t}(r.a.Component),j=f;a(52);i.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.8b650b24.chunk.js.map